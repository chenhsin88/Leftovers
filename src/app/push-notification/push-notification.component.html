<!-- é é¢æ¨™é¡Œ -->
<div class="header-section">
  <div class="header-title">
    <h1>æ¨æ’­ç®¡ç†</h1>
  </div>
</div>

<div class="main-card">
  <!-- å•†å“å¡ç‰‡ç¶²æ ¼ -->
  <div class="products-grid">
    <!-- ä½¿ç”¨ @for è¿´åœˆé¡¯ç¤ºæ¯å€‹å•†å“ -->
    @for (product of products; track $index) {
    <div class="product-card">
      <!-- å•†å“åœ–ç‰‡å€åŸŸ -->
      <div class="image-container">
        <img [src]="product.imageUrl" [alt]="product.name" />
        <!-- æ¨æ’­ç‹€æ…‹æ¨™ç±¤ -->
        <div class="status-badge" [class.active]="product.pushNotifications">
          {{ product.pushNotifications ? 'å·²æ¨æ’­' : 'æœªæ¨æ’­' }}
        </div>
      </div>

      <!-- å•†å“è³‡è¨Šå€åŸŸ -->
      <div class="card-content">
        <!-- å•†å“åç¨± -->
        <h3>{{ product.name }}</h3>

        <!-- åƒ¹æ ¼è³‡è¨Š -->
        <div class="price-section">
          <!-- åŸåƒ¹ -->
          <div class="price-row">
            <span class="label">åŸåƒ¹</span>
            <span class="original-price">NT$ {{ product.originalPrice }}</span>
          </div>

          <!-- æŠ˜æ‰£å¾Œå”®åƒ¹ -->
          <div class="price-row">
            <span class="label">æŠ˜æ‰£å¾Œå”®åƒ¹</span>
            <span class="discount-price">NT$ {{ product.discountedPrice }}</span>
          </div>

          <!-- å†æŠ˜æ‰£å”®åƒ¹ (å¯ç·¨è¼¯) -->
          <div class="price-row">
            <span class="label final-price-label">å†æŠ˜æ‰£å”®åƒ¹</span>
            <div class="price-input-group">
              <span>NT$</span>
              <input type="number" [value]="product.newPrice"
                (input)="updateFinalDiscountPrice(product.foodItemId!, $event)" min="1" class="price-input" />

            </div>
          </div>
        </div>

        <!-- å–è²¨æ™‚é–“ -->
        <div class="pickup-time">
          <span class="time-icon">ğŸ•’</span>
          <span>å–è²¨æˆªæ­¢</span>
          <span class="time-value">{{ formatDate(product.pickupEndTime) }}</span>
        </div>

        <!-- æ¨æ’­è¨­å®šå€åŸŸ -->
        <div class="push-settings">
          <!-- æ¨æ’­é–‹é—œ -->
          <div class="setting-row">
            <div class="switch-group">
              <label class="switch">
                <input type="checkbox" [checked]="product.pushNotifications"
                  (change)="togglePushNotification(product.foodItemId!)" />
                <span class="slider"></span>
              </label>
              <span class="switch-label">
                {{ product.pushNotifications ? 'æ¨æ’­å·²å•Ÿç”¨' : 'æ¨æ’­å·²é—œé–‰' }}
              </span>
            </div>
            <!-- æ¨æ’­åœ–ç¤º -->
            <span class="bell-icon" [class.active]="product.pushNotifications">
              {{ product.pushNotifications ? 'ğŸ””' : 'ğŸ”•' }}
            </span>
          </div>

          <!-- æ¨æ’­æå‰æ™‚é–“ (å¯ç·¨è¼¯) -->
          <div class="setting-row">
            <span class="label">æ¨æ’­æå‰æ™‚é–“</span>
            <div class="time-input-group">
              <input type="number" [value]="product.defaultHours"
                (input)="updatePushNotificationHours(product.foodItemId!, $event)" min="1" max="24" class="time-input" />
              <span>å°æ™‚</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    }
  </div>
</div>
